-- ------------------------------------------------------------------------------------------------
-- Dies ist ein Kommentar, d.h. diese Zeile wird NICHT ausgefuehrt
-- ------------------------------------------------------------------------------------------------
 
-- mit dieser Anweisung wird der AUTO COMMIT (Schreiben in die Datenbank ausgeschaltet)
-- alle Veränderungen sind nur innerhalb der aktuellen Session gültig
UPDATE COMMAND OPTIONS USING C OFF; 
 
DROP TABLE IF EXISTS UEB03B.TBDPOSTFILESTREET;
DROP TABLE IF EXISTS UEB03B.TBDPOSTFILEZIP;

CREATE TABLESPACE STBDPOSTFILESTREET
  PAGESIZE 4096
  MANAGED BY AUTOMATIC STORAGE
;

CREATE TABLESPACE STBDPOSTFILEZIP
  PAGESIZE 4096
  MANAGED BY AUTOMATIC STORAGE
;

CREATE TABLE UEB03C.TBDPOSTFILESTREET (
       TBDPOSTFILESTREETID  BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000),
       STREET               VARCHAR(120),
       ZIP4                 CHAR(4),
       ZIPADDON             CHAR(2),
       ZIP6                 CHAR(6),
       SHORTCITY            VARCHAR(54),
       COUNTRY              CHAR(2),
       ADDRSCANTON          CHAR(2),
       STREETNR             INTEGER,
       STREETNRADDON        VARCHAR(6),
       POLGNAME             VARCHAR(60),
       POLGCANTON           CHAR(2),
       BFSNR                INTEGER,
       LASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP
)
IN STBDPOSTFILESTREET
;


COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.TBDPOSTFILESTREETID IS '''Primary Key''';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.STREET IS 'Street name';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.ZIP4 IS '4 digits of ZIP';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.ZIPADDON IS 'ZIP addon';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.ZIP6 IS 'Full ZIP (6 digits)';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.SHORTCITY IS 'Short city name (27 characters)';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.COUNTRY IS 'Country';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.ADDRSCANTON IS 'Address canton';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.STREETNR IS 'Street no w/o addon';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.STREETNRADDON IS 'Addon (like 22A)';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.POLGNAME IS 'Pol. municipality name';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.POLGCANTON IS 'Municipality canton';
COMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.LASTUPDATED IS 'timestamp of last change';


CREATE TABLE UEB03C.TBDPOSTFILEZIP (
       TBDPOSTFILEZIPID     BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000),
       ZIP4                 CHAR(4),
       ZIPADDON             CHAR(2),
       ZIP6                 CHAR(6),
       CITY                 VARCHAR(60),
       SHORTCITY            VARCHAR(54),
       COUNTRY              CHAR(2),
       BFSNR                INTEGER,
       POLGNAME             VARCHAR(60),
       CANTON               CHAR(2),
       LASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP
)
IN STBDPOSTFILEZIP
;

COMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.TBDPOSTFILEZIPID IS '''Primary Key''';
COMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.ZIP4 IS '4 digits of ZIP';
COMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.ZIPADDON IS 'ZIP addon';
COMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.ZIP6 IS 'Full ZIP (6 digits)';
COMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.CITY IS 'City name';
COMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.SHORTCITY IS 'Short city name (27 characters)';
COMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.COUNTRY IS 'Country';
COMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.POLGNAME IS 'Pol. municipality name';
COMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.CANTON IS 'Municipality canton';
COMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.LASTUPDATED IS 'timestamp of last change';
	  
	  

CREATE UNIQUE INDEX UEB03C.XPKTBDPOSTFILESTRE ON UEB03C.TBDPOSTFILESTREET
(
       TBDPOSTFILESTREETID            ASC
);

CREATE INDEX UEB03C.XIE1TBDPOSTFILESTR ON UEB03C.TBDPOSTFILESTREET
(
       ZIP6                           ASC
);

CREATE INDEX UEB03C.XIE2TBDPOSTFILESTR ON UEB03C.TBDPOSTFILESTREET
(
       STREET                         ASC,
       ZIP6                           ASC,
       STREETNR                       ASC
);

ALTER TABLE UEB03C.TBDPOSTFILESTREET  ADD CONSTRAINT XPKTBDPOSTFILESTRE PRIMARY KEY (
              TBDPOSTFILESTREETID
);
	  
	  
CREATE INDEX UEB03C.XIE3TBDPOSTFILESTR ON UEB03C.TBDPOSTFILESTREET
(
       ZIP4                           ASC
);

CREATE INDEX UEB03C.XIE4TBDPOSTFILESTR ON UEB03C.TBDPOSTFILESTREET
(
       STREET                         ASC,
       ZIP4                           ASC,
       STREETNR                       ASC
);

CREATE INDEX UEB03C.XIE5TBDPOSTFILESTR ON UEB03C.TBDPOSTFILESTREET
(
       BFSNR                          ASC
);

			  
CREATE UNIQUE INDEX UEB03C.XPKTBDPOSTFILEZIP ON UEB03C.TBDPOSTFILEZIP
(
       TBDPOSTFILEZIPID               ASC
);


ALTER TABLE UEB03C.TBDPOSTFILEZIP  ADD CONSTRAINT XPKTBDPOSTFILEZIP PRIMARY KEY (
      TBDPOSTFILEZIPID
);
	  
CREATE INDEX UEB03C.XIE1TBDPOSTFILEZIP ON UEB03C.TBDPOSTFILEZIP
(
       BFSNR                           ASC
);
	  
CREATE INDEX UEB03C.XIE2TBDPOSTFILEZIP ON UEB03C.TBDPOSTFILEZIP
(
       ZIP4                           ASC
);

CREATE INDEX UEB03C.XIE3TBDPOSTFILEZIP ON UEB03C.TBDPOSTFILEZIP
(
       ZIP6                           ASC
);



ECHO ******************** END OF SCRIPT ********************; 

